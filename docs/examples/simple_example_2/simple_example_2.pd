#N canvas 497 744 1307 652 10;
#X obj 48 566 dac~ 1;
#X obj 53 528 *~;
#X obj 423 335 line~;
#X msg 501 64 0 100;
#X text 415 34 on;
#X text 513 36 off;
#N canvas 0 0 450 300 (subpatch) 0;
#X array \$0-array 100 float 0 black black;
#X coords 0 -1 99 1 167 93 1;
#X restore 110 308 graph;
#X obj 276 142 loadbang;
#X obj 179 279 tabwrite~ \$0-array;
#X obj 619 35 import mrpeach;
#X obj 51 34 udpreceive 1337;
#X obj 51 69 unpackOSC;
#X obj 51 102 routeOSC /note/pitch;
#X obj 49 133 t f;
#X obj 45 189 line 500 10;
#X obj 47 160 50, f 9;
#X obj 46 220 phasor~;
#X obj 274 172 metro 10;
#X text 52 -21 Example tone wanger;
#X msg 415 64 0.2 100;
#N canvas 1386 725 1120 594 adsr 1;
#X obj 198 144 inlet;
#X obj 528 184 inlet;
#X text 194 119 trigger;
#X obj 198 172 sel 0;
#X obj 337 188 t b;
#X obj 259 297 f \$1;
#X obj 259 322 pack 0 \$2;
#X obj 585 184 inlet;
#X obj 531 314 del \$2;
#X obj 551 462 line~;
#X obj 555 337 f \$4;
#X obj 594 412 pack 0 \$3;
#X obj 647 184 inlet;
#X obj 709 184 inlet;
#X obj 782 183 inlet;
#X msg 198 203 stop;
#X obj 705 339 pack 0 \$5;
#X text 528 162 level;
#X obj 594 388 * \$1;
#X obj 551 487 outlet~;
#X text 195 411 and pack with;
#X text 196 431 attack time;
#X text 124 159 if zero;
#X text 125 176 release;
#X text 105 193 and cancel;
#X text 136 210 decay;
#X text 377 305 on attack \, set a;
#X text 371 338 recall sustain value;
#X text 408 411 pack with decay time;
#X text 698 365 on release ramp;
#X text 699 382 back to zero;
#X obj 555 362 * 0.01;
#X text 581 162 attack;
#X text 648 161 decay;
#X text 702 162 sustain;
#X text 779 162 release;
#X text 295 104 attack;
#X obj 297 125 moses;
#X obj 287 155 t b b;
#X msg 221 323 0;
#X text 113 306 optionally;
#X text 103 324 bash to zero;
#X text 118 279 ATTACK:;
#X text 348 122 test for negative trigger;
#X text 346 146 if so \, zero;
#X text 347 162 the output;
#X text 371 198 in any case;
#X text 396 388 multiply by peak level;
#X text 373 319 delay for sustain;
#X text 369 361 convert from percent;
#X text 248 373 ... then;
#X text 196 392 recall peak level;
#X text 532 146 peak;
#X text 374 182 ... do this;
#X floatatom 835 269 5 0 0 0 - - -, f 5;
#X floatatom 890 267 5 0 0 0 - - -, f 5;
#X floatatom 939 268 5 0 0 0 - - -, f 5;
#X floatatom 990 270 5 0 0 0 - - -, f 5;
#X floatatom 1039 272 5 0 0 0 - - -, f 5;
#X connect 0 0 3 0;
#X connect 1 0 5 1;
#X connect 1 0 18 1;
#X connect 1 0 54 0;
#X connect 3 0 15 0;
#X connect 3 0 16 0;
#X connect 3 1 37 0;
#X connect 4 0 5 0;
#X connect 4 0 8 0;
#X connect 5 0 6 0;
#X connect 6 0 9 0;
#X connect 7 0 6 1;
#X connect 7 0 8 1;
#X connect 7 0 55 0;
#X connect 8 0 10 0;
#X connect 9 0 19 0;
#X connect 10 0 31 0;
#X connect 11 0 9 0;
#X connect 12 0 11 1;
#X connect 12 0 56 0;
#X connect 13 0 10 1;
#X connect 13 0 57 0;
#X connect 14 0 16 1;
#X connect 14 0 58 0;
#X connect 15 0 8 0;
#X connect 16 0 9 0;
#X connect 18 0 11 0;
#X connect 31 0 18 0;
#X connect 37 0 38 0;
#X connect 37 1 4 0;
#X connect 38 0 4 0;
#X connect 38 1 39 0;
#X connect 39 0 9 0;
#X restore 502 418 pd adsr;
#X obj 135 502 *~;
#X msg 615 237 0;
#X obj 622 367 unpack f f f f f;
#X obj 697 236 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X msg 551 224 1;
#X obj 551 177 routeOSC /bip;
#X obj 595 322 1 5 50 0 0;
#X connect 1 0 0 0;
#X connect 2 0 21 0;
#X connect 3 0 2 0;
#X connect 7 0 17 0;
#X connect 7 0 27 0;
#X connect 10 0 11 0;
#X connect 11 0 12 0;
#X connect 11 0 26 0;
#X connect 12 0 13 0;
#X connect 13 0 15 0;
#X connect 14 0 16 0;
#X connect 15 0 14 0;
#X connect 16 0 1 0;
#X connect 16 0 8 0;
#X connect 17 0 8 0;
#X connect 19 0 2 0;
#X connect 20 0 21 1;
#X connect 21 0 1 1;
#X connect 22 0 20 0;
#X connect 23 0 20 1;
#X connect 23 1 20 2;
#X connect 23 2 20 3;
#X connect 23 3 20 4;
#X connect 23 4 20 5;
#X connect 24 0 27 0;
#X connect 25 0 20 0;
#X connect 26 0 25 0;
#X connect 27 0 23 0;
